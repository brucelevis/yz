service = service or {}

local scene = {}
function scene.leave(pid)
	local player = playermgr.getplayer(pid)
	if player then
		player.sceneid = nil
		player.pos = nil
		player:enterscene(DEFAULT_SCENEID,DEFAULT_POS)
	end
end

function scene.test(...)
	print("scene.test",...)
end

service.scene = scene

function service.dispatch(_,session,source,_,protoname,cmd,...)

	logger.log("debug","netservice",format("[recv] source=%s session=%d protoname=%s cmd=%s request=%s",source,session,protoname,cmd,{...}))
	local tbl = service[protoname]
	local func = tbl[cmd]
	return func(...)
end

return service
