
gm = require "gamelogic.gm.init"

--- 指令: test
--- 用法: test test_filename json_str
function gm.test(args)
	local isok,args = checkargs(args,"string","string")
	if not isok then
		net.msg.S2C.notify(master_pid,"用法: test test_filename json_str")
		return
	end
	local test_filename = args[1]
	local func = require ("gamelogic.test." .. test_filename)
	local tbl = cjson.decode(args[2])
	print(format("test %s %s",test_filename,tbl))
	func(table.unpack(tbl))
	print(string.format("test %s ok",test_filename))
end

function gm.testfunc(args)
	--local list={[1]=10000223,[2]=10000221,[3]=1000008,[4]=10000231,[5]=10000230,[6]=10000239,[7]=10000235,[8]=10000234,[9]=10000227,[10]=10000233,[11]=10000220,[12]=10000222,[13]=10000224,[14]=10000232,[15]=10000236,}
	local list={[1]=10000115,[2]=10000202,[3]=10000232,[4]=10000224,[5]=10000222,[6]=10000220,[7]=10000235,[8]=10000221,[9]=10000118,[10]=10000187,[11]=10000179,[12]=10000240,[13]=10000223,[14]=10000229,[15]=10000150,}
	for i,pid in ipairs(list) do
		resumemgr.getresume(pid)
		print("getresume",pid)
	end
end

return gm
